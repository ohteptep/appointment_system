{% load static %}

<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="utf-8" />
  <link rel="icon" type="image/png" href="{% static 'assets/tupclogo.png' %}">
  <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
  <title>TUP-C Superuser - Create & Manage</title>
  <meta content='width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0, shrink-to-fit=no' name='viewport' />
  <link href="https://fonts.googleapis.com/css2?family=Source+Sans+Pro&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.7.1/css/all.css" integrity="sha384-fnmOCqbTlWIlj8LyTjo7mOUStjsKC4pOpQbqyi7RrhN7udi9RwhKkMHpvLbHG9Sr" crossorigin="anonymous">
  <link href="{% static 'assets/css/bootstrap.min.css' %}" rel="stylesheet" />
  <link href="{% static 'assets/css/now-ui-dashboard.css' %}" rel="stylesheet" />
  <link href="{% static 'assets/css/demo.css' %}" rel="stylesheet" />
  <link href="https://cdn.jsdelivr.net/npm/boxicons@latest/css/boxicons.min.css" rel="stylesheet">
</head>

<body class="">
  <div class="wrapper ">
    <div class="sidebar" data-color="red">
      <div class="logo">
        <a href="" class="simple-text logo-mini">
          <img src="{% static 'assets/tupclogo.png' %}" alt="">
        </a>
        <a href="" class="simple-text logo-normal">TUP-C Superuser</a>
      </div>
      <div class="sidebar-wrapper" id="sidebar-wrapper">
        <ul class="nav">
          <li>
            <a href="{% url 'dashboard' %}">
              <i class="now-ui-icons design_app"></i>
              <p>Dashboard</p>
            </a>
          </li>
          <li class="active">
            <a href="{% url 'create_manage' %}">
              <i class="now-ui-icons ui-1_simple-add"></i>
              <p>Create & Manage</p>
            </a>
          </li>
          <li>
            <a href="{% url 'appointments' %}">
              <i class="now-ui-icons files_single-copy-04"></i>
              <p>Appointments & CSS forms</p>
            </a>
          </li>
          <li>
            <a href="{% url 'user' %}">
              <i class="now-ui-icons users_single-02"></i>
              <p>User Profile</p>
            </a>
          </li>
        </ul>
      </div>
    </div>
    <div class="main-panel" id="main-panel">
      <!-- Navbar -->
      <nav class="navbar navbar-expand-lg navbar-transparent  bg-primary  navbar-absolute">
        <div class="container-fluid">
          <div class="navbar-wrapper">
            <div class="navbar-toggle">
              <button type="button" class="navbar-toggler">
                <span class="navbar-toggler-bar bar1"></span>
                <span class="navbar-toggler-bar bar2"></span>
                <span class="navbar-toggler-bar bar3"></span>
              </button>
            </div>
            <a class="navbar-brand" href="#pablo">Create & Manage</a>
          </div>
          <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navigation" aria-controls="navigation-index" aria-expanded="false" aria-label="Toggle navigation">
            <span class="navbar-toggler-bar navbar-kebab"></span>
            <span class="navbar-toggler-bar navbar-kebab"></span>
            <span class="navbar-toggler-bar navbar-kebab"></span>
          </button>
          <div class="collapse navbar-collapse justify-content-end" id="navigation">
            <ul class="navbar-nav">
              <li class="nav-item dropdown">
                <a class="nav-link dropdown-toggle" id="navbarDropdownMenuLink" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                  <i class="now-ui-icons users_single-02"></i>
                  <p>
                    <span class="d-lg-none d-md-block">Account Settings</span>
                  </p>
                </a>
                <div class="dropdown-menu dropdown-menu-right" aria-labelledby="navbarDropdownMenuLink">
                  <a class="dropdown-item" href="{% url 'user' %}">Manage Account</a>
                  <a class="dropdown-item" href="{% url 'logout_superuser' %}">Logout</a>
                </div>
              </li>
            </ul>
          </div>
        </div>
      </nav>
      <!-- End Navbar -->
      <div class="panel-header">
        <div class="header text-center">
          <h2 class="title">Create Accounts & Manage Accounts</h2>
          <p class="category">Create an account for faculty members and Manage their respective accounts.</p>
          <button class="btn btn-danger" data-toggle="modal" data-target="#exampleModal"><i class="now-ui-icons ui-1_simple-add"></i> Create Account</button>
          <!-- Modal -->
          <div class="modal fade" id="exampleModal" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">
            <div class="modal-dialog" role="document">
              <div class="modal-content">
                <div class="modal-header">
                  <h5 class="modal-title" id="exampleModalLabel">Create Faculty Account</h5>
                  <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                  </button>
                </div>
                <div class="modal-body">
                  <form method="POST">
                    {% csrf_token %}
                    <h6 class="text-center">Please Fill up the necessary information needed</h6>
                    <br>
                    <div class="form-outline mb-4">
                      <select name="position" class="form-control" id="" required>
                        <option value="" selected disabled>Select Position</option>
                        <option value="Head">Head</option>
                        <option value="Faculty">Faculty</option>
                    </select>
                    </div>
                    <div class="form-outline mb-4">
                      <select name="department" class="form-control" id="" required>
                        <option value="" selected disabled>Select Department</option>
                        <option value="OAA">Office of Academic Affair (OAA)</option>
                        <option value="DIT">Department of Information Technology (DIT)</option>
                        <option value="DLA">Department of Liberal Arts (DLA)</option>
                        <option value="OCL">Office of Campus Library (OCL)</option>
                        <option value="DMS">Department of Mathematics and Science (DMS)</option>
                        <option value="DOE">Department of Engineering (DOE)</option>
                        <option value="DED">Department of Education (DED)</option>
                        <option value="OSA">Office of Student Affairs (OSA)</option>
                        <option value="UITC">University Information Technology Center (UITC)</option>
                        <option value="DPE">Department of Physical Education (DPE)</option>
                        <option value="SD">Security Department (SD)</option>
                        <option value="RE">Office of Research & Extension (ORE)</option>
                    </select>
                    </div>
                    <div class="form-outline mb-4">
                        <input type="text" onkeyup="this.value=this.value.replace(/[^\d]/,'')" maxlength="5" class="form-control" name="username" placeholder="Enter I.D Number" required/>
                      </div>
                    <div class="form-outline mb-4">
                      <input type="text" class="form-control" name="first_name" placeholder="Enter Firstname" required/>
                    </div>
                    <div class="form-outline mb-4">
                      <input type="text" class="form-control" name="last_name" placeholder="Enter Lastname" required/>
                    </div>
                    <div class="form-outline mb-4">
                        <input type="text" class="form-control" name="email" placeholder="Enter Email" required/>
                      </div>
                      <ul style="text-align: left;">
                        <li>Password can't be too similar to other personal information.</li>
                        <li>Password must conatain at least 8 characters.</li>
                        <li>Password can't be a commonly used password.</li>
                        <li>Password can't be entirely numeric.</li>
                    </ul>
                    <div class="row">
                        <div class="form-group col-md-6">
                            <input type="password" class="form-control" name="password1" placeholder="Enter Password" required/>
                        </div>
                        <div class="form-group col-md-6">
                            <input type="password" class="form-control" name="password2" placeholder="Retype Password" required/>
                        </div>
                    </div>
                    <br>
                </div>
                  <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
                    <button type="submit" class="btn btn-danger">Create Account</button>
                  </div>
                </form>
              </div>
            </div>
          </div>
        </div>
      </div>
      <br><br>
      <div class="content">
        <div class="col">
          <div class="card">
            <div class="card-header">
              <p>
                Legend: <br> 
                <i class='bx bxs-edit' ></i> - Edit Account, 
                <i class='bx bxs-user-x' ></i> - Disable Account <br>
                <i class='bx bxs-user-check' ></i> - Enable Account, 
                <i class='bx bxs-trash' ></i> - Delete Account
              </p>
              <h5 class="card-category">Department Faculty Members</h5>
              <h4 class="card-title">Faculty Members</h4>
            </div>
            <div class="card-body">
              <div class="table-responsive">
                  <table class="table table-hover dataTable js-exportable" >
                    <thead class=" text-primary">
                      <th>Name</th>
                      <th>I.D Number</th>
                      <th>Email</th>
                      <th>Department</th>
                      <th>Position</th>
                      <th>Status</th>
                      <th>Action</th>
                    </thead>
                    <tbody>
                      {% for f in faculty %}
                        <tr>
                          <td>{{f.first_name}} {{f.last_name}}</td>
                          <td>{{f.username}}</td>
                          <td>{{f.email}}</td>
                          <td>{{f.department}}</td>
                          <td>{{f.position}}</td>
                          <td>
                            {% if f.is_active == 0 %}
                            Disabled
                            {% elif f.is_active == 1 %}
                            Active
                            {% endif %}
                          </td>
                          <td>
                            <button class="btn btn-primary" data-toggle="modal" data-target="#edit{{f.id}}"><i class='bx bxs-edit' ></i></button>
                            <button class="btn btn-warning" data-toggle="modal" data-target="#disable{{f.id}}"><i class='bx bxs-user-x' ></i></button>
                            <button class="btn btn-success" data-toggle="modal" data-target="#enable{{f.id}}"><i class='bx bxs-user-check' ></i></button>
                            <button class="btn btn-danger"  data-toggle="modal" data-target="#delete{{f.id}}"><i class='bx bxs-trash' ></i></button>
                          </td>
                        </tr>
                        <!-- Modal -->
                        <div class="modal fade" id="edit{{f.id}}" tabindex="-1" role="dialog" aria-labelledby="edit{{f.id}}" aria-hidden="true">
                          <div class="modal-dialog" role="document">
                            <div class="modal-content">
                              <div class="modal-header">
                                <h5 class="modal-title" id="exampleModalLabel">Edit Credentials for User : {{f.first_name}} {{f.last_name}}</h5>
                                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                                  <span aria-hidden="true">&times;</span>
                                </button>
                              </div>
                              <div class="modal-body">
                                <form method="POST">
                                  {% csrf_token %}
                                  <br>
                                  <div class="form-outline mb-4">
                                      <input type="text" class="form-control" name="e_username" value={{f.username}} required/>
                                    </div>
                                  <div class="form-outline mb-4">
                                    <input type="text" class="form-control" name="e_first_name" value={{f.first_name}} required/>
                                  </div>
                                  <div class="form-outline mb-4">
                                    <input type="text" class="form-control" name="e_last_name" value={{f.last_name}} required/>
                                  </div>
                                  <div class="form-outline mb-4">
                                      <input type="text" class="form-control" name="e_email" value={{f.email}} required/>
                                    </div>
                                
                                  <br>
                              </div>
                                <div class="modal-footer">
                                  <input type="hidden" name="id_update_admin" value="{{f.id}}">
                                  <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
                                  <button type="submit" class="btn btn-success">Update</button>
                                </div>
                              </form>
                            </div>
                          </div>
                        </div>

                        <!-- Modal -->
                        <div class="modal fade" id="disable{{f.id}}" tabindex="-1" role="dialog" aria-labelledby="delete{f.id}}" aria-hidden="true">
                          <div class="modal-dialog" role="document">
                            <div class="modal-content">
                              <div class="modal-header">
                                <h5 class="modal-title" id="exampleModalLabel">Disable Account Admin : {{f.first_name}} {{f.last_name}}</h5>
                                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                                  <span aria-hidden="true">&times;</span>
                                </button>
                              </div>
                              <div class="modal-body text-center">
                                <form method="POST">
                                  {% csrf_token %}
                                  <p><strong><i class='bx bxs-error bx-flashing' style="color: red;"></i> Warning this admin account will be temporarily disabled</strong></p>
                                  <h4>Are you sure to disable this user admin?</h4>
                              </div>
                                <div class="modal-footer">
                                  <input type="hidden" name="id_disable_admin" value="{{f.id}}">
                                  <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
                                  <button type="submit" class="btn btn-warning">Disable</button>
                                </div>
                              </form>
                            </div>
                          </div>
                        </div>

                        <!-- Modal -->
                        <div class="modal fade" id="enable{{f.id}}" tabindex="-1" role="dialog" aria-labelledby="delete{f.id}}" aria-hidden="true">
                          <div class="modal-dialog" role="document">
                            <div class="modal-content">
                              <div class="modal-header">
                                <h5 class="modal-title" id="exampleModalLabel">Enable Account Admin : {{f.first_name}} {{f.last_name}}</h5>
                                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                                  <span aria-hidden="true">&times;</span>
                                </button>
                              </div>
                              <div class="modal-body text-center">
                                <form method="POST">
                                  {% csrf_token %}
                                  <h4>Are you sure to enable this user admin?</h4>
                              </div>
                                <div class="modal-footer">
                                  <input type="hidden" name="id_enable_admin" value="{{f.id}}">
                                  <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
                                  <button type="submit" class="btn btn-success">Enable</button>
                                </div>
                              </form>
                            </div>
                          </div>
                        </div>

                        <!-- Modal -->
                        <div class="modal fade" id="delete{{f.id}}" tabindex="-1" role="dialog" aria-labelledby="delete{f.id}}" aria-hidden="true">
                          <div class="modal-dialog" role="document">
                            <div class="modal-content">
                              <div class="modal-header">
                                <h5 class="modal-title" id="exampleModalLabel">Removing Admin : {{f.first_name}} {{f.last_name}}</h5>
                                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                                  <span aria-hidden="true">&times;</span>
                                </button>
                              </div>
                              <div class="modal-body text-center">
                                <form method="POST">
                                  {% csrf_token %}
                                  <p><strong><i class='bx bxs-error bx-flashing' style="color: red;"></i> Warning this Action is Irreversible!</strong></p>
                                  <h4>Are you sure to remove this user admin?</h4>
                              </div>
                                <div class="modal-footer">
                                  <input type="hidden" name="id_delete_admin" value="{{f.id}}">
                                  <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
                                  <button type="submit" class="btn btn-danger">Remove</button>
                                </div>
                              </form>
                            </div>
                          </div>
                        </div>

                        {% endfor %}
                    </tbody>
                  </table>

              </div>
            </div>
          </div>
        </div>
        <div class="col">
          <div class="card">
            <div class="card-header">
              <h5 class="card-category">All Registered Students</h5>
              <h4 class="card-title">Students</h4>
            </div>
            <div class="card-body">
              <div class="table-responsive">
                <table class="table table-hover dataTable js-exportable">
                  <thead class=" text-primary">
                    <th>I.D Number</th>
                    <th>Email</th>
                    <th>Action</th>
                  </thead>
                  <tbody>
                    {% for s in student %}
                      <tr>
                        <td>{{s.username}}</td>
                        <td>{{s.email}}</td>
                        <td>
                          <button class="btn btn-success" data-toggle="modal" data-target="#edit{{s.id}}"><i class='bx bxs-edit' ></i></button>
                          <button class="btn btn-danger" data-toggle="modal" data-target="#delete{{s.id}}"><i class='bx bxs-trash' ></i></button>
                        </td>
                      </tr>
                      <!-- Modal -->
                      <div class="modal fade" id="edit{{s.id}}" tabindex="-1" role="dialog" aria-labelledby="edit{{s.id}}" aria-hidden="true">
                        <div class="modal-dialog" role="document">
                          <div class="modal-content">
                            <div class="modal-header">
                              <h5 class="modal-title" id="exampleModalLabel">Edit Credentials for User : {{s.username}}</h5>
                              <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                                <span aria-hidden="true">&times;</span>
                              </button>
                            </div>
                            <div class="modal-body">
                              <form method="POST">
                                {% csrf_token %}
                                <br>
                                <div class="form-outline mb-4">
                                    <input type="text" class="form-control" name="s_username" value={{s.username}} required/>
                                  </div>
                                <div class="form-outline mb-4">
                                    <input type="text" class="form-control" name="s_email" value={{s.email}} required/>
                                  </div>
                                <br>
                            </div>
                              <div class="modal-footer">
                                <input type="hidden" name="id_update_student" value="{{s.id}}">
                                <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
                                <button type="submit" class="btn btn-success">Update</button>
                              </div>
                            </form>
                          </div>
                        </div>
                      </div>

                      <!-- Modal -->
                      <div class="modal fade" id="delete{{s.id}}" tabindex="-1" role="dialog" aria-labelledby="delete{s.id}}" aria-hidden="true">
                        <div class="modal-dialog" role="document">
                          <div class="modal-content">
                            <div class="modal-header">
                              <h5 class="modal-title" id="exampleModalLabel">Removing Student : {{s.username}}</h5>
                              <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                                <span aria-hidden="true">&times;</span>
                              </button>
                            </div>
                            <div class="modal-body text-center">
                              <form method="POST">
                                {% csrf_token %}
                                <p><strong><i class='bx bxs-error bx-flashing' style="color: red;"></i> Warning this Action is Irreversible!</strong></p>
                                <h4>Are you sure to remove this user student?</h4>
                            </div>
                              <div class="modal-footer">
                                <input type="hidden" name="id_delete_student" value="{{s.id}}">
                                <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
                                <button type="submit" class="btn btn-danger">Remove</button>
                              </div>
                            </form>
                          </div>
                        </div>
                      </div>

                      {% endfor %}
                  </tbody>
                </table>

       

              </div>
            </div>
          </div>
        </div>
      </div>

        <footer class="footer">
          <div class=" container-fluid ">
            <div class="copyright" id="copyright">
              &copy; <script>
                document.getElementById('copyright').appendChild(document.createTextNode(new Date().getFullYear()))
              </script>, All rights reserved <a href="">Appointment system</a>.
            </div>
          </div>
        </footer>

      </div>
    </div>
  </div>

  <script src="{% static 'assets/js/jquery.min.js' %}"></script>
  <script src="{% static 'assets/js/popper.min.js' %}"></script>
  <script src="{% static 'assets/js/bootstrap.min.js' %}"></script>
  <script src="{% static 'assets/js/perfect-scrollbar.jquery.min.js' %}"></script>
  <script src="{% static 'assets/js/now-ui-dashboard.min.js' %}" type="text/javascript"></script>
  <script src="{% static 'assets/js/demo.js' %}"></script>
  <script src="{% static 'bundles/datatablescripts.bundle.js' %}"></script>
  <script src="{% static 'js/jquery-datatable.js' %}"></script>
  <script src="{% static 'plugins/jquery-datatable/buttons/dataTables.buttons.min.js' %}"></script>
  <script src="{% static 'plugins/jquery-datatable/buttons/buttons.bootstrap4.min.js' %}"></script>
  <script src="{% static 'plugins/jquery-datatable/buttons/buttons.colVis.min.js' %}"></script>
  <script src="{% static 'plugins/jquery-datatable/buttons/buttons.flash.min.js' %}"></script>
  <script src="{% static 'plugins/jquery-datatable/buttons/buttons.html5.min.js' %}"></script>
  <script src="{% static 'plugins/jquery-datatable/buttons/buttons.print.min.js' %}"></script>
  <script src="//cdn.jsdelivr.net/npm/sweetalert2@11"></script>
  {% for message in messages %}
  <script>
      Swal.fire({
          title: '{{message}}',
          confirmButtonColor: '#d33',
          })
  </script>
  {% endfor %}

</body>

</html>